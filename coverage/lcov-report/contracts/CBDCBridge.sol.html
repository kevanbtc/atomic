<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/CBDCBridge.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> CBDCBridge.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/42</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/68</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/17</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/54</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;
&nbsp;
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/utils/ReentrancyGuard.sol";
import "@openzeppelin/contracts/utils/Pausable.sol";
import "@openzeppelin/contracts/utils/cryptography/ECDSA.sol";
import "@openzeppelin/contracts/utils/cryptography/MessageHashUtils.sol";
&nbsp;
interface IERC20 {
    function transfer(address to, uint256 amount) external returns (bool);
    function transferFrom(address from, address to, uint256 amount) external returns (bool);
    function balanceOf(address account) external view returns (uint256);
}
&nbsp;
interface ICBDCValidator {
    function validateTransaction(bytes32 txHash, bytes memory signature) external view returns (bool);
    function isAuthorizedCBDC(address cbdcToken) external view returns (bool);
}
&nbsp;
contract CBDCBridge is Ownable, ReentrancyGuard, Pausable {
    using ECDSA for bytes32;
    using MessageHashUtils for bytes32;
    
    ICBDCValidator public cbdcValidator;
    
    struct BridgeTransaction {
        bytes32 txId;
        address sourceToken;
        address targetToken;
        address sender;
        address recipient;
        uint256 amount;
        uint256 sourceChain;
        uint256 targetChain;
        uint256 timestamp;
        bool completed;
        bool cancelled;
    }
    
    mapping(bytes32 =&gt; BridgeTransaction) public bridgeTransactions;
    mapping(address =&gt; bool) public authorizedValidators;
    mapping(address =&gt; uint256) public tokenLimits; // daily limits
    mapping(address =&gt; mapping(uint256 =&gt; uint256)) public dailyVolume; // token =&gt; day =&gt; volume
    
    uint256 public constant MIN_CONFIRMATION_TIME = 300; // 5 minutes
    uint256 public constant MAX_TRANSACTION_AMOUNT = 1000000 * 10**18; // 1M tokens
    uint256 public bridgeFee = 10; // 0.1% in basis points
    
    event BridgeInitiated(
        bytes32 indexed txId,
        address indexed sourceToken,
        address indexed sender,
        uint256 amount,
        uint256 targetChain
    );
    event BridgeCompleted(bytes32 indexed txId, address indexed recipient);
    event BridgeCancelled(bytes32 indexed txId, string reason);
    event ValidatorAdded(address indexed validator);
    event ValidatorRemoved(address indexed validator);
    event TokenLimitSet(address indexed token, uint256 limit);
    
<span class="fstat-no" title="function not covered" >    modifier onlyAuthorizedValidator() {</span>
<span class="cstat-no" title="statement not covered" >        require(authorizedValidators[msg.sender], "Not authorized validator")</span>;
        _;
    }
    
<span class="fstat-no" title="function not covered" >    constructor(address _cbdcValidator) Ownable(msg.sender) {</span>
        cbdcValidator = ICBDCValidator(_cbdcValidator);
        authorizedValidators[msg.sender] = true;
    }
    
<span class="fstat-no" title="function not covered" >    function addValidator(address _validator) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        require(_validator != address(0), "Invalid validator address")</span>;
        authorizedValidators[_validator] = true;
<span class="cstat-no" title="statement not covered" >        emit ValidatorAdded(_validator);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function removeValidator(address _validator) external onlyOwner {</span>
        authorizedValidators[_validator] = false;
<span class="cstat-no" title="statement not covered" >        emit ValidatorRemoved(_validator);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function setTokenLimit(address _token, uint256 _limit) external onlyOwner {</span>
        tokenLimits[_token] = _limit;
<span class="cstat-no" title="statement not covered" >        emit TokenLimitSet(_token, _limit);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function initiateBridge(</span>
        address _sourceToken,
        address _targetToken,
        address _recipient,
        uint256 _amount,
        uint256 _targetChain
    ) external payable nonReentrant whenNotPaused {
<span class="cstat-no" title="statement not covered" >        require(_amount &gt; 0 &amp;&amp; _amount &lt;= MAX_TRANSACTION_AMOUNT, "Invalid amount")</span>;
<span class="cstat-no" title="statement not covered" >        require(_recipient != address(0), "Invalid recipient")</span>;
<span class="cstat-no" title="statement not covered" >        require(cbdcValidator.isAuthorizedCBDC(_sourceToken), "Unauthorized source token")</span>;
<span class="cstat-no" title="statement not covered" >        require(cbdcValidator.isAuthorizedCBDC(_targetToken), "Unauthorized target token")</span>;
        
        // Check daily limits
<span class="cstat-no" title="statement not covered" >        uint256 today = block.timestamp / 86400;</span>
<span class="cstat-no" title="statement not covered" >        require(dailyVolume[_sourceToken][today] + _amount &lt;= tokenLimits[_sourceToken], "Daily limit exceeded")</span>;
        
        // Calculate fee
<span class="cstat-no" title="statement not covered" >        uint256 fee = (_amount * bridgeFee) / 10000;</span>
<span class="cstat-no" title="statement not covered" >        require(msg.value &gt;= fee, "Insufficient bridge fee")</span>;
        
<span class="cstat-no" title="statement not covered" >        bytes32 txId = keccak256(abi.encodePacked(</span>
            _sourceToken,
            _targetToken,
            msg.sender,
            _recipient,
            _amount,
            block.chainid,
            _targetChain,
            block.timestamp
        ));
        
<span class="cstat-no" title="statement not covered" >        require(bridgeTransactions[txId].txId == bytes32(0), "Transaction already exists")</span>;
        
        // Lock source tokens
<span class="cstat-no" title="statement not covered" >        IERC20(_sourceToken).transferFrom(msg.sender, address(this), _amount)</span>;
        
        bridgeTransactions[txId] = BridgeTransaction({
            txId: txId,
            sourceToken: _sourceToken,
            targetToken: _targetToken,
            sender: msg.sender,
            recipient: _recipient,
            amount: _amount,
            sourceChain: block.chainid,
            targetChain: _targetChain,
            timestamp: block.timestamp,
            completed: false,
            cancelled: false
        });
        
        dailyVolume[_sourceToken][today] += _amount;
        
<span class="cstat-no" title="statement not covered" >        emit BridgeInitiated(txId, _sourceToken, msg.sender, _amount, _targetChain);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function completeBridge(</span>
        bytes32 _txId,
        bytes memory _validatorSignature
    ) external onlyAuthorizedValidator nonReentrant {
<span class="cstat-no" title="statement not covered" >        BridgeTransaction storage transaction = bridgeTransactions[_txId];</span>
<span class="cstat-no" title="statement not covered" >        require(transaction.txId != bytes32(0), "Transaction does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        require(!transaction.completed, "Transaction already completed")</span>;
<span class="cstat-no" title="statement not covered" >        require(!transaction.cancelled, "Transaction was cancelled")</span>;
<span class="cstat-no" title="statement not covered" >        require(</span>
            block.timestamp &gt;= transaction.timestamp + MIN_CONFIRMATION_TIME,
            "Minimum confirmation time not met"
        );
        
        // Validate the transaction with CBDC validator
<span class="cstat-no" title="statement not covered" >        require(</span>
            cbdcValidator.validateTransaction(_txId, _validatorSignature),
            "Invalid validator signature"
        );
        
        transaction.completed = true;
        
        // Release tokens to recipient (in practice, this would mint on target chain)
<span class="cstat-no" title="statement not covered" >        IERC20(transaction.targetToken).transfer(transaction.recipient, transaction.amount)</span>;
        
<span class="cstat-no" title="statement not covered" >        emit BridgeCompleted(_txId, transaction.recipient);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function cancelBridge(bytes32 _txId, string memory _reason) external {</span>
<span class="cstat-no" title="statement not covered" >        BridgeTransaction storage transaction = bridgeTransactions[_txId];</span>
<span class="cstat-no" title="statement not covered" >        require(transaction.txId != bytes32(0), "Transaction does not exist")</span>;
<span class="cstat-no" title="statement not covered" >        require(!transaction.completed, "Transaction already completed")</span>;
<span class="cstat-no" title="statement not covered" >        require(!transaction.cancelled, "Transaction already cancelled")</span>;
<span class="cstat-no" title="statement not covered" >        require(</span>
            msg.sender == transaction.sender || msg.sender == owner(),
            "Only sender or owner can cancel"
        );
        
        transaction.cancelled = true;
        
        // Return locked tokens to sender
<span class="cstat-no" title="statement not covered" >        IERC20(transaction.sourceToken).transfer(transaction.sender, transaction.amount)</span>;
        
<span class="cstat-no" title="statement not covered" >        emit BridgeCancelled(_txId, _reason);</span>
    }
    
<span class="fstat-no" title="function not covered" >    function emergencyWithdraw(address _token, uint256 _amount) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        IERC20(_token).transfer(owner(), _amount)</span>;
    }
    
<span class="fstat-no" title="function not covered" >    function setBridgeFee(uint256 _fee) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        require(_fee &lt;= 1000, "Fee too high")</span>; // Max 10%
        bridgeFee = _fee;
    }
    
<span class="fstat-no" title="function not covered" >    function setCBDCValidator(address _newValidator) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        require(_newValidator != address(0), "Invalid validator address")</span>;
        cbdcValidator = ICBDCValidator(_newValidator);
    }
    
<span class="fstat-no" title="function not covered" >    function getBridgeTransaction(bytes32 _txId) external view returns (BridgeTransaction memory) {</span>
<span class="cstat-no" title="statement not covered" >        return bridgeTransactions[_txId];</span>
    }
    
<span class="fstat-no" title="function not covered" >    function getDailyVolume(address _token, uint256 _day) external view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return dailyVolume[_token][_day];</span>
    }
    
<span class="fstat-no" title="function not covered" >    function getTodayVolume(address _token) external view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        uint256 today = block.timestamp / 86400;</span>
<span class="cstat-no" title="statement not covered" >        return dailyVolume[_token][today];</span>
    }
    
<span class="fstat-no" title="function not covered" >    function pause() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        _pause()</span>;
    }
    
<span class="fstat-no" title="function not covered" >    function unpause() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        _unpause()</span>;
    }
    
<span class="fstat-no" title="function not covered" >    function withdraw() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        payable(owner()).transfer(address(this).balance)</span>;
    }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Aug 24 2025 14:39:07 GMT-0400 (Eastern Daylight Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
